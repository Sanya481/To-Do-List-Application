@use "../utils/mixins" as *;

// Task input
.task-input {
  margin-bottom: var(--spacing-lg);

  @media (max-width: 600px) {
    flex-direction: column;
  }

  &__container {
    display: flex;
    gap: var(--spacing-sm);
    position: relative;
  }

  &__field {
    flex: 1;
    padding: var(--spacing-sm) var(--spacing-md);
    border: 2px solid var(--color-light-gray);
    border-radius: var(--border-radius-md);
    font-size: 1rem;
    transition: all var(--transition-normal) ease;
    box-shadow: var(--shadow-sm);
    min-width: 0; // Важно для корректного сжатия поля

    &:focus {
      @include focus-ring;
      border-color: var(--color-primary);
    }

    &::placeholder {
      color: var(--color-text-light);
      opacity: 0.7;
    }
  }

  &__button {
    @include button-reset;
    background: linear-gradient(to right, var(--color-primary), var(--color-secondary));
    color: white;
    border-radius: var(--border-radius-md);
    padding: 0 var(--spacing-lg);
    font-weight: 500;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    transition: all var(--transition-normal) ease;
    box-shadow: var(--shadow-md);
    position: relative;
    overflow: hidden;
    white-space: nowrap;
    flex-shrink: 0; // Предотвращает сжатие кнопки

    z-index: 1; // Для корректного наложения эффектов

    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: all var(--transition-slow) ease;
    }

    /* --------- Эффект свечения при фокусе --------- */
    &:focus {
      outline: none;
      animation: pulse-glow 2s infinite;
    }

    &:focus-visible {
      &::after {
        content: '';
        position: absolute;
        inset: -10px;
        border-radius: var(--border-radius-md);
        background: linear-gradient(45deg,
            var(--color-primary),
            var(--color-secondary),
            var(--color-primary));
        background-size: 200% 200%;
        z-index: -1;
        opacity: 0.7;
        animation: gradient-shift 3s ease infinite;
      }
    }

    /* --------- Улучшенный hover с градиентным следом --------- */
    &:hover {
      &::before {
        left: 100%;
      }

      // Добавляем легкое свечение
      box-shadow: 0 4px 15px rgba(var(--color-primary-rgb), 0.3),
      var(--shadow-lg);
    }

    /* --------- Активное состояние с "нажатием" --------- */
    &:active {
      transform: translateY(1px);
      box-shadow: var(--shadow-md);

      &::after {
        opacity: 0.5;
        animation: none;
      }
    }
  }
}

/* Анимации */
@keyframes pulse-glow {
  0%, 100% { box-shadow: var(--shadow-md); }
  50% { box-shadow: 0 0 10px rgba(var(--color-primary-rgb), 0.5); }
}

@keyframes gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}